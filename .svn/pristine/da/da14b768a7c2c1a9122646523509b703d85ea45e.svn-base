import React, { useState } from 'react'
import { Container, Text, ButtonsContainer, MethodContainer, StyledTextField, TooltipTitle } from './cash-card-selector.styled'
import RoundedButton from '../rounded-button'
import HtmlTooltip from '../htmlTooltip'

const CashCardSelector = ({setSelectedPaymentMethod, selectedPaymentMethod, amount, openTooltip, cashValue, setCashValue}) => {
    const [change, setChange] = useState(0)

    const onChangeCashValue = (value) =>{
        setCashValue(value)
        const difference = value - amount
        setChange(difference > 0 ? difference : 0)
    }
    return <Container>
        <Text>Elija un m√©todo de pago:</Text>
        <ButtonsContainer>
            <RoundedButton onClickHandler={() => setSelectedPaymentMethod(1)} backgroundcolor={selectedPaymentMethod === 1 ? '#6ec4e8' : '#c8c8c8'} text='Efectivo'/>
            <RoundedButton onClickHandler={() => setSelectedPaymentMethod(2)} backgroundcolor={selectedPaymentMethod === 2 ? '#6ec4e8' : '#c8c8c8'} text='Tarjeta'/>
        </ButtonsContainer>
        {selectedPaymentMethod && <MethodContainer>
           <Text>{selectedPaymentMethod === 1 ? 'Efectivo' : 'Tarjeta'} <strong>RD$ {amount.toFixed(2)}</strong></Text>
           {selectedPaymentMethod === 1 && <>
                <HtmlTooltip arrow open={openTooltip} placement='bottom-start' title={<TooltipTitle>El monto a pagar debe ser mayor o igual que <strong>Total Efectivo</strong></TooltipTitle>}>
                    <StyledTextField openTooltip={openTooltip} value={cashValue} onChange={(e) => {onChangeCashValue(e.target.value)}} variant="outlined" type='number' placeholder='Digitar monto recibido'
                        inputProps={{
                                style: {fontSize: 16, height:8} 
                            }}/>
                </HtmlTooltip>
                <Text>Devuelta: <strong>RD$ {change.toFixed(2)}</strong></Text>
           </>}
        </MethodContainer>
        }
    </Container>
}

export default CashCardSelector